#!/usr/bin/expect

# usage : login [host] [username] [password]

set timeout 20

set cmd [lrange $argv 1 end]
set password [lindex $argv 0]

eval spawn $cmd
expect {
    "(yes/no)" {
        send "yes\r";
        expect "assword:" {
            send "$password\r";
        }
    }
    "assword:" {
        send "$password\r";
    }
}
interact
